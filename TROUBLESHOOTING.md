# 问题排查指南

## 🎥 视频相关问题

### ❌ 视频加载失败: 不支持的视频格式 (错误代码: 4)

**症状**: 
- 控制台显示 `MEDIA_ERR_SRC_NOT_SUPPORTED`
- 视频元素显示红色错误图标
- 错误信息: "不支持的视频格式"

**可能原因**:
1. ✅ 视频编码不是 H.264
2. ✅ 音频编码不兼容
3. ✅ 视频文件损坏
4. ✅ 使用了 Base64 编码（已修复为 Blob URL）

**解决方案**:

#### 方案 1: 使用 HandBrake 转换（推荐）
1. 下载 [HandBrake](https://handbrake.fr/)
2. 打开视频文件
3. 选择预设: "Fast 1080p30" 或 "Fast 720p30"
4. 确保设置:
   - Format: MP4
   - Video Codec: H.264 (x264)
   - Audio Codec: AAC
5. 点击 "Start Encode"

#### 方案 2: 使用 FFmpeg 命令行
```bash
# 基本转换
ffmpeg -i input.mp4 -c:v libx264 -c:a aac -strict experimental output.mp4

# 如果文件过大，压缩视频
ffmpeg -i input.mp4 -c:v libx264 -crf 23 -preset medium -c:a aac -b:a 128k output.mp4

# 调整分辨率
ffmpeg -i input.mp4 -vf scale=1280:720 -c:v libx264 -crf 23 -c:a aac output.mp4
```

#### 方案 3: 在线转换
访问 [CloudConvert](https://cloudconvert.com/) 或 [Online-Convert](https://www.online-convert.com/)
- 上传视频
- 选择输出格式: MP4
- 设置视频编码: H.264
- 设置音频编码: AAC
- 下载转换后的文件

### ❌ 视频解码失败 (错误代码: 3)

**症状**:
- 错误信息: "视频解码失败"
- 视频文件可以在其他播放器中播放

**解决方案**:
1. 重新导出视频，使用标准编码参数
2. 降低视频分辨率和比特率
3. 检查视频文件是否完整（重新下载或复制）

### ❌ 视频文件过大

**症状**:
- 上传时提示文件过大
- 加载缓慢或失败

**解决方案**:
```bash
# 压缩视频（保持质量）
ffmpeg -i input.mp4 -c:v libx264 -crf 28 -preset slow -c:a aac -b:a 96k output.mp4

# 降低分辨率
ffmpeg -i input.mp4 -vf scale=1280:720 -c:v libx264 -crf 23 output.mp4

# 裁剪视频长度（前30秒）
ffmpeg -i input.mp4 -t 30 -c:v libx264 -crf 23 -c:a aac output.mp4
```

---

## 📝 文字滚动问题

### ❌ 文字不滚动

**检查清单**:
1. ✅ 文字对齐方式是否设置为 "滚动"
2. ✅ 是否在预览模式下查看（编辑模式下不显示动画）
3. ✅ 文字内容是否超出容器宽度
4. ✅ 滚动速度是否设置为 0

**解决方案**:
- 在属性面板中将"对齐方式"设置为"滚动"
- 点击"预览"按钮查看滚动效果
- 调整滚动速度（1-9）

### ❌ 滚动速度太快/太慢

**解决方案**:
- 在属性面板中调整"滚动速度"滑块
- 速度范围: 1（最慢）- 9（最快）
- 推荐值: 3-5

---

## 🖼️ 图片轮播问题

### ❌ 图片不轮播

**检查清单**:
1. ✅ 是否添加了多张图片
2. ✅ 是否在预览模式下查看
3. ✅ 切换间隔是否设置正确

**解决方案**:
- 确保添加了至少 2 张图片
- 在预览模式下查看轮播效果
- 调整切换间隔（建议 2000-5000ms）

### ❌ 图片显示变形

**解决方案**:
- 将"显示方式"设置为"等比例居中"
- 调整容器尺寸以匹配图片比例

---

## 🎨 界面和操作问题

### ❌ 元素无法拖动

**可能原因**:
- 在预览模式下（预览模式禁用编辑）
- 元素被其他元素遮挡

**解决方案**:
- 关闭预览对话框
- 在层级管理中调整元素顺序

### ❌ 属性面板不显示

**解决方案**:
- 点击画布中的元素以选中
- 检查是否有元素被选中（蓝色边框）

### ❌ 画布缩放异常

**解决方案**:
- 调整浏览器窗口大小
- 刷新页面
- 检查画布尺寸设置是否合理

---

## 💾 保存和加载问题

### ❌ 保存的设计丢失

**原因**:
- 浏览器清除了本地存储
- 使用了隐私/无痕模式

**解决方案**:
- 使用"下载 JSON 文件"功能保存到本地
- 定期备份设计文件
- 避免使用隐私模式

### ❌ JSON 数据无法复制

**解决方案**:
- 使用"复制 JSON"按钮
- 如果失败，手动选择文本复制
- 使用"下载 JSON 文件"功能

---

## 🌐 浏览器兼容性问题

### Chrome/Edge
- ✅ 完全支持所有功能
- ✅ 推荐使用

### Firefox
- ✅ 完全支持
- ⚠️ 某些视频格式可能不支持

### Safari
- ✅ 基本功能支持
- ⚠️ 仅支持 MP4(H.264) 视频
- ⚠️ 某些 CSS 动画可能有差异

### IE11
- ⚠️ 部分功能受限
- ⚠️ 不推荐使用
- 建议使用现代浏览器

---

## 🔍 调试技巧

### 查看控制台日志
1. 按 F12 打开开发者工具
2. 切换到 Console 标签
3. 查看错误信息和警告

### 检查元素状态
```javascript
// 在控制台中查看当前元素
console.log(this.elements)

// 查看选中的元素
console.log(this.selectedElement)
```

### 清除本地存储
```javascript
// 在控制台中执行
localStorage.removeItem('adDesign')
location.reload()
```

---

## 📞 获取帮助

如果以上方法都无法解决问题，请：

1. **检查文档**:
   - [视频功能使用指南](./VIDEO_GUIDE.md)
   - [动画效果指南](./ANIMATION_GUIDE.md)
   - [使用指南](./USAGE_GUIDE.md)

2. **收集信息**:
   - 浏览器类型和版本
   - 错误信息截图
   - 控制台日志
   - 操作步骤

3. **提交问题**:
   - 描述问题现象
   - 提供复现步骤
   - 附上相关截图和日志

---

## 🛠️ 常用工具

### 视频处理
- [HandBrake](https://handbrake.fr/) - 免费视频转换工具
- [FFmpeg](https://ffmpeg.org/) - 命令行视频处理工具
- [CloudConvert](https://cloudconvert.com/) - 在线格式转换

### 图片处理
- [TinyPNG](https://tinypng.com/) - 图片压缩
- [Squoosh](https://squoosh.app/) - 在线图片优化

### 开发工具
- Chrome DevTools - 浏览器调试工具
- Vue DevTools - Vue 组件调试工具

---

## ✅ 最佳实践检查清单

### 视频使用
- [ ] 使用 MP4 格式，H.264 编码
- [ ] 文件大小 < 50MB
- [ ] 分辨率 ≤ 1920x1080
- [ ] 比特率 2-5 Mbps
- [ ] 在多个浏览器中测试

### 图片使用
- [ ] 使用 JPG/PNG 格式
- [ ] 单张图片 < 5MB
- [ ] 分辨率适中
- [ ] 已压缩优化

### 文字使用
- [ ] 字体大小适中（16-48px）
- [ ] 颜色对比度足够
- [ ] 滚动速度合理（3-5）
- [ ] 文本内容不要过长

### 性能优化
- [ ] 元素数量 < 20
- [ ] 避免同时播放多个视频
- [ ] 图片已压缩
- [ ] 定期保存设计
